
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dio's Blog</title>
  <meta name="author" content="Diogo Pereira Pinto">

  
  <meta name="description" content="Configurando plugin Jetty
Para utilizar e configurar o plugin do Jetty através do Maven, é necessário adicionar no pom.xml as seguintes entradas: org &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://di0.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Dio's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><div class="header-left">
  <hgroup>
  <h1><a href="/">Dio's Blog</a></h1>
  
  <div class="subtitle">
    <h2>By Diogo Pinto</h2>
  </div>
  
  </hgroup>
  
</div>

<div class="header-right">
  <ul class="main-navigation">
 <div class="selected"> 
  <li><a href="/">blog</a></li></div><div class="spacer"></div>
     <div> 
  <li><a href="/projects">projects</a></li></div><div class="spacer"></div>
       <div> 
  <li><a href="/work">work</a></li></div><div class="spacer"></div>
         <div> 
  <li><a href="/about">about</a></li></div>
</ul>
  

</div>
</header>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2017/11/06/maven/">Maven-jetty-and-activemq</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-11-06T00:36:41-02:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Configurando plugin Jetty
Para utilizar e configurar o plugin do Jetty através do Maven, é necessário adicionar no pom.xml as seguintes entradas:</p>

<p><build>
    <plugins>
         <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>7.6.8.v20121106</version>
                <configuration>
                        <scanIntervalSeconds>10</scanIntervalSeconds>
                        <webApp>
                                <contextPath>/test</contextPath>
                        </webApp>
                        <webAppConfig>
                                <jettyEnvXml>src/main/webapp/WEB-INF/jetty-env.xml</jettyEnvXml>
                                <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
                        </webAppConfig>
                </configuration>
         </plugin>
     <plugins>
</build>
Acima, além de adicionar o plugin a ser ativado, foi adicionado também, as configurações que serão lidas pelo WebContext.</p>

<p>Adicionando dependências dos artefatos para o ActiveMQ
Para o ActiveMQ, é necessário adicionar a entrada abaixo do core, que será utilizada como dependência:</p>

<p><dependency>
       <groupId>org.apache.activemq</groupId>
       <artifactId>activemq-core</artifactId>
       <version>5.0.0</version>
</dependency>
Essa entrada apenas disponibilizará as bibliotecas necessárias para criar as conexões e sessões.</p>

<p>Instalando binários do ActiveMQ
Para instalar os binários do ActiveMQ:</p>

<p>wget <a href="http://activemq.apache.org/path/tofile/apache-activemq-x.x.x-bin.tar.gz">http://activemq.apache.org/path/tofile/apache-activemq-x.x.x-bin.tar.gz</a>
cd [diretorio_instalacao]
tar zxvf activemq-x.x.x-bin.tar.gz
Iniciando ActiveMQ
Para iniciar o daemon após instalação:</p>

<p>cd [diretorio_instalacao]/bin
./activemq start
Para acessar o painel de administrador:</p>

<p><a href="http://127.0.0.1:8161/admin/">http://127.0.0.1:8161/admin/</a></p>

<p>Configurando recursos JNDI para o Jetty
No caminho especificado nas configurações do Plugin do Jetty, no arquivo pom, é necessário configurar os recursos do JNDI para o específico webapp, exemplo:</p>

<p>&lt;?xml version=&ldquo;1.0&rdquo;?>
&lt;!DOCTYPE Configure PUBLIC &ldquo;-//Mort Bay Consulting//DTD Configure//EN&rdquo;
&ldquo;<a href="http://jetty.mortbay.org/configure.dtd">http://jetty.mortbay.org/configure.dtd</a>&rdquo;>
<Configure id='jms-webapp-wac' class="org.eclipse.jetty.webapp.WebAppContext">
  <New id="connectionFactory" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>
      <Ref id='jms-webapp-wac' />
    </Arg>
    <Arg>jms/ConnectionFactory</Arg>
    <Arg>
      <New class="org.apache.activemq.ActiveMQConnectionFactory">
        <Arg>tcp://127.0.0.1:61616</Arg>
      </New>
    </Arg>
  </New>
  <New id="fooQueue" class="org.eclipse.jetty.plus.jndi.Resource">
    <Arg>jms/FooQueue</Arg>
    <Arg>
      <New class="org.apache.activemq.command.ActiveMQQueue">
        <Arg>FOO.QUEUE</Arg>
      </New>
    </Arg>
  </New>
</Configure>
Onde:</p>

<p><New class="org.apache.activemq.ActiveMQConnectionFactory">
        <Arg>tcp://127.0.0.1:61616</Arg>
</New>
Deve ser o IP e porta onde o daemon do ActiveMQ está escutando.</p>

<p>E onde:</p>

<p><New class="org.apache.activemq.command.ActiveMQQueue">
        <Arg>FOO.QUEUE</Arg>
</New>
É a fila configurada no painel ou linha de comando do ActiveMQ.</p>

<p>Mapeando os recursos do ActiveMQ dentro do Container
No arquivo de configuração web.xml, dentro do WEB-INF da aplicação, deverá ser mapeado referências para
utilização do ActiveMQ:</p>

<p><resource-ref id="ResourceRef_1291169365479">
        <description>JMS Connection</description>
        <res-ref-name>jms/ConnectionFactory</res-ref-name>
        <res-type>javax.jms.ConnectionFactory</res-type>
        <res-auth>Container</res-auth>
        <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref></p>

<p><message-destination-ref>
        <message-destination-ref-name>jms/FooQueue</message-destination-ref-name>
        <message-destination-type>javax.jms.Queue</message-destination-type>
        <message-destination-usage>Produces</message-destination-usage>
        <message-destination-link>jms/FooQueue</message-destination-link>
</message-destination-ref></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  <section>
  <p>I'm Diogo Pereira Pinto, a System Analyst, Developer and fervent Unix fan</a>!</p>
  

  <p>You can read more about me on my <a href="/about/">about</a> page. To see what I'm working on, check out my GitHub page <a href="https://github.com/di0">here</a>.</p>
  <p>My resume can be found <a href="https://www.linkedin.com/in/diogo-pereira-pinto-7607a13a/">here</a>.</p>
  <div class="social-icons">
    

    

    

    

    

  </div>
</section>

  <section>
  <h1>Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/11/06/maven/">Maven-jetty-and-activemq</a>
      </li>
    
  </ul>
</section>

  
    <section>
  <h1>Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/11/06/maven/">Maven-jetty-and-activemq</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Diogo Pereira Pinto -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

<p>
<span>Copyright &copy; 2017  Diogo Pereira Pinto -</span>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a> using the <a href="https://github.com/fapper/classic-martinb">classic-martinb</a> theme</span>
</p>
</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
